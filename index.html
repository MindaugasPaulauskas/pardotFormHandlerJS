<!DOCTYPE html>
<html lang="en">
<head>
<title>pardotFormHandlerJS demo page</title>
<meta charset="utf-8">
<meta name="description" content="pardotFormHandlerJS Demo">
<meta name="keywords" content="Pardot, Pardot Form Handler, Marketing Cloud Account Engagement, pardotFormHandlerJS">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="./pardot-form-handler-js.js"></script>
<style>
    *{font-family:Helvetica,Arial,sans-serif;box-sizing:border-box;word-wrap:break-word;max-width:100%;}
    @media(min-width:740px){body{max-width:700px;margin:8px auto;}}
    iframe[title*=GitHub]{margin:70px 0 0;}
    hr{margin:2em 0;}
    h1{font-size:1.5em;margin-top:0;}
    h2{font-size:1.3em;}
    .pfhjs{background:#ccc;}
    h1 .pfhjs{background:#000;color:#fff;}
</style>
</head>
<body>
<noscript>Sorry, but you need to enable JavaScript for this demo to work.</noscript>

<!-- NOT A PART OF A DEMO -->

<iframe src="https://ghbtns.com/github-btn.html?user=MindaugasPaulauskas&repo=pardotFormHandlerJS&type=star&count=true&size=large&v=2" frameborder="0" scrolling="0" width="170" height="30" title="GitHub stars"></iframe>

<a href="https://github.com/MindaugasPaulauskas/pardotFormHandlerJS" target="_blank" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0;" aria-hidden="true"><path d="M0,0L115,115L130,115 L142,142L250,250L250,0Z"></path><path d="M128.3,109.0C113.8,99.7 119.0,89.6 119.0,89.6C122.0,82.7 120.5,78.6 120.5,78.6C119.2,72.0 123.4,76.3 123.4,76.3C127.3,80.9 125.5,87.3 125.5,87.3C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 0.56s ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media(max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 0.56s ease-in-out}}</style>

<!-- NOT A PART OF A DEMO -->

<h1><span class="pfhjs">pardot<wbr>Form<wbr>Handler<wbr>JS</span> demo page</h1>
<p><i>pardotFormHandlerJS</i> is a script tailored for setting up custom Salesforce (aka "SFDC") Pardot (aka "Marketing Cloud Account Engagement") forms on your website without using iframes or backend APIs, as it sends requests directly from browser to Pardot handler.</p>
<p>Save yourself some time and set up custom HTML forms with direct submissions to Pardot. <i>pardotFormHandlerJS</i> has custom JSONP AJAX implementation, allowing Pardot messaging in your form, request timeouts, endless customization (where only your imagination is the limit), and more...</p>
<p>Instructions and documentation can be found on <a href="https://github.com/MindaugasPaulauskas/pardotFormHandlerJS" target="_blank"><span class=pfhjs>pardot<wbr>Form<wbr>Handler<wbr>JS</span> GitHub page</a></p>

<!-- NOT A PART OF A DEMO -->

<hr>
<h2>Information on submisions</h2>
<p>Demo forms are submitted to a mockup server, but submission data is not stored on the server.</p>
<div class="not-a-part-of-the-demo starting-server">
    <style>
        .server-check{position:relative;margin:5px 0;border:1px solid #000;max-width:400px;padding:5px;background:#ccc;}
        .server-check .text{position:relative;color:#fff;font-size:0.9em;}
        .server-check .loader{position:absolute;width:0%;height:100%;top:0;left:0;background:#000;transition:width 70s;transition-timing-function:linear;}
        .server-check.loading .loader{width:100%}
        .server-check.failure{background:#dd1a21;}
        .server-check.success{background:#147f3c;}
        .server-check.hidden{visibility:hidden;}
        .server-check.failure .loader, .server-check.success .loader{display:none;}
    </style>
    <div class="server-check">
        <div class="loader"></div>
        <div class="text">Checking Status / Starting Pardot server mockup... (~1min)</div>
    </div>
    <script>
        let serverCheck = {
            self: this,
            success: false,
            running: () => {
                self.success = true;
                document.querySelector(".server-check").classList.add("success");
                document.querySelector(".server-check .text").innerHTML = "Mockup server is running";
            },
            declareFailure: () => {
                if (self.success === true) {
                    return;
                }
                document.querySelector(".server-check").classList.add("failure");
                document.querySelector(".server-check .text").innerHTML = "Looks like server didn't start, try again later...";
            }
        }
        setTimeout(() => document.querySelector(".server-check").classList.add("loading"), 3000);
        setTimeout(serverCheck.declareFailure, 80000);
        setTimeout(() => document.querySelector(".server-check").classList.add("hidden"), 600000);
    </script>
    <script src="https://pardothandler.onrender.com/status?start-server" async></script>
</div>
<p>In the case that Pardot Handler mockup server is down, you have an oportunity to check timeout functionality, while it's starting. After period of unactivity server will spin down again. It should take around a minute for it to spin back up after getting a timout error.</p>

<!-- DEMO 1 -->

<hr>
<h2 id="demo-1">Demo 1: Simple form (with dynamic callbacks)</h2>
<p>This demo features a simple html form with submissions to Pardot, and features almost default settings, showcasing out of the box functionality.</p>
<style>
    .pardot-demo{position:relative;padding:5px;border:1px solid #ccc;max-width:400px;}
    .pardot-demo input{margin:0 0 5px;}
</style>
<form style="" action="https://pardothandler.onrender.com/pardot-handler-simulation-with-dynamic-success-and-error-location" class="pardot-demo">
    <label for="name">Name:</label><br>
    <input id="name" name="name"><br>
    <label for="email">Email:</label><br>
    <input id="email" type="email" name="email"><br>
    <button type="submit">Submit</button>
</form>
<script>
    let pardotDebugForm = window.pardotFormHandlerJS.setupForm(
        document.querySelector(".pardot-demo"),
        {successMessage: "Success!"}
    )
        .setSettings({
            successMessage: "More Success!",
        })
        .onBeforeSubmit(function(formValues, form) {
            console.log("Demo1: [onBeforeSubmit] formValues:", formValues);
        })
        .onSubmit(function(detail) {
            console.log("Demo1: [onSubmit] detail:", detail);
        })
        .onCancel(function(detail) {
            console.log("Demo1: [onCancel] detail:", detail);
        })
        .onSuccess(function(detail) {
            console.log("Demo1: [onSuccess] detail:", detail);
        })
        .onError(function(detail) {
            console.log("Demo1: [onError] detail:", detail);
        })
        .onComplete(function(detail) {
            console.log("Demo1: [onComplete] detail:", detail);
        });

    pardotDebugForm.setSettings({
        successMessage: "Even more Success!",
    });
</script>

<!-- DEMO 2 -->

<hr>
<h2 id="demo-2">Demo 2: Form with static callbacks (and custom validation)</h2>
<p>This demo features a simple html form with static callbacks. Static error callback does not specify what is wrong with users submitted values. This can be circumvented by adding custom validation. Custom validation allows better control on user inputs than the one awailable in Pardot Handler settings. In this demo you can enamble or disable custom validation.</p>
<style>
    .pardot-demo-2{position:relative;padding:5px;border:1px solid #ccc;max-width:400px;}
    .pardot-demo-2 input{margin:0 0 5px;}
    .pardot-demo-2 .error{margin:-5px 0 5px;color:#f00;font-size:0.9em;}
</style>

<input type="checkbox" id="demo-2-enable-custom-validation" name="demo-2-enable-custom-validation" value="true"><label for="demo-2-enable-custom-validation">Enable custom validation</label>

<form style="" action="https://pardothandler.onrender.com/pardot-handler-simulation-with-static-success-and-error-locations" class="pardot-demo-2">
    <div><label for="demo2-name">Name*:</label></div>
    <div><input id="demo2-name" name="name"></div>
    <div><label for="demo2-surname">Surname:</label></div>
    <div><input id="demo2-surname" name="surname"></div>
    <div><label for="demo2-email">Email*:</label></div>
    <div><input id="demo2-email" name="email"></div>
    <div><button type="submit">Submit</button></div>
</form>
<script>
    let pardotDemoForm2 = window.pardotFormHandlerJS.setupForm(document.querySelector(".pardot-demo-2"));
    pardotDemoForm2.onBeforeSubmit((formValues, form) => {
        console.log("Demo2: [onBeforeSubmit] formValues:", formValues);

        if (!document.querySelector('#demo-2-enable-custom-validation').checked) {
            return true;
        }

        let errors = 0;
        const removeErrors = () => {
            const errorElements = document.querySelectorAll(".pardot-demo-2 .error");
            errorElements.forEach((el) => el.remove());
        };
        const printError = (id, message) => {
            let errorElement = document.createElement("div");
            errorElement.classList.add("error");
            errorElement.innerHTML = message;
            document.getElementById(id).after(errorElement);
            errors++;
            console.log(id, message);
        };

        const name = document.getElementById("demo2-name").value;
        const email = document.getElementById("demo2-email").value;

        removeErrors();

        if (name === "") {
            printError("demo2-name", "Name is required");
        }
        else if (name.trim() === "") {
            printError("demo2-name", "Name cant have only whitespace charecters");
        }
        else if (name.trim().length < 2) {
            printError("demo2-name", "Name has to have at least 2 symbols");
        }

        if (email === "") {
            printError("demo2-email", "Email is required");
        } else if (
            !String(email).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)
        ) {
            printError("demo2-email", "Email is not correct");
        }

        console.log("errors:", errors);

        if (errors) {
            return false;
        }
    });
    pardotDemoForm2.onSubmit(function(detail) {
        console.log("Demo2: [onSubmit] detail:", detail);
    });
    pardotDemoForm2.onCancel(function(detail) {
        console.log("Demo2: [onCancel] detail:", detail);
    });
    pardotDemoForm2.onSuccess(function(detail) {
        console.log("Demo1: [onSuccess] detail:", detail);
    });
    pardotDemoForm2.onError(function(detail) {
        console.log("Demo2: [onError] detail:", detail);
    });
    pardotDemoForm2.onComplete(function(detail) {
        console.log("Demo2: [onComplete] detail:", detail);
    });
</script>

<!-- DEMO 3 -->

<hr>
<h2 id="demo-3">Demo 3: Form (with custom success messaging)</h2>
<p>This demo features a simple html form with submissions to Pardot, and features almost default settings, showcasing out of the box functionality.</p>
<style>
    .pardot-demo-3{position:relative;padding:5px;border:1px solid #ccc;max-width:400px;}
    .pardot-demo-3 input{margin:0 0 5px;}
</style>
<form style="" action="https://pardothandler.onrender.com/pardot-handler-simulation-with-dynamic-success-and-error-location" class="pardot-demo-3">
    <label for="demo3-name">Name:</label><br>
    <input id="demo3-name" name="name"><br>
    <label for="demo3-email">Email:</label><br>
    <input id="demo3-email" type="email" name="email"><br>
    <button type="submit">Submit</button>
</form>
<script>
    let pardotDemoForm3 = window.pardotFormHandlerJS
        .setupForm(document.querySelector(".pardot-demo-3"))
        .setSettings({successMessage: false,})
        .onBeforeSubmit(function(formValues, form) {
            console.log("Demo3: [onBeforeSubmit] formValues:", formValues);
        })
        .onSubmit(function(detail) {
            console.log("Demo3: [onSubmit] detail:", detail);
        })
        .onCancel(function(detail) {
            console.log("Demo3: [onCancel] detail:", detail);
        })
        .onSuccess(function(detail) {
            console.log("Demo3: [onSuccess] detail:", detail);

            let successMessage = document.createElement("div");
            successMessage.style.position = "absolute";
            successMessage.style.background = "#fff";
            successMessage.style.cursor = "pointer";
            successMessage.style.top = "0";
            successMessage.style.bottom = "0";
            successMessage.style.left = "0";
            successMessage.style.right = "0";
            successMessage.innerHTML = "<div style='position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);color:#485;animation:demo-zoom 1s ease infinite;'>Well Done!</div><style>@keyframes demo-zoom{0%{transform:translate(-50%,-50%)scale(1,1);}50%{transform:translate(-50%,-50%)scale(2,2);}100%{transform:translate(-50%,-50%)scale(1,1);}}</style>"
            document.querySelector('.pardot-demo-3').appendChild(successMessage);
            successMessage.addEventListener("click", e => e.target.remove());
        })
        .onError(function(detail) {
            console.log("Demo3: [onError] detail:", detail);
        })
        .onComplete(function(detail) {
            console.log("Demo1: [onComplete] detail:", detail);
        });
</script>

<!-- end of demos -->

<hr>
<p>Project Home: <a href="https://github.com/MindaugasPaulauskas/pardotFormHandlerJS" target="_blank"><span class=pfhjs>pardot<wbr>Form<wbr>Handler<wbr>JS</span> on GitHub</a></p>
<hr>
<p style="text-align:center;margin-bottom:30px;">Copyright &copy; 2024 Mindaugas Paulauskas, <a href="https://raw.githubusercontent.com/MindaugasPaulauskas/pardotFormHandlerJS/refs/heads/main/LICENSE" target="_blank">license</a></p>
</body>
</html>
